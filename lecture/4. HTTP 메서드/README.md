# HTTP λ©”μ„λ“

- HTTP API λ§λ“¤μ–΄λ³΄κΈ°
- HTTP λ©”μ„λ“ - GET, POST
- HTTP λ©”μ„λ“ - PUT, PATCH, DELETE
- HTTP λ©”μ„λ“μ μ†μ„±
- HTTP λ©”μ„λ“ ν™μ©

* * *

## 4-1. HTTP API μ„¤κ³„ <br/> URI(Uniform Resource Identifier)

* API URI μ„¤κ³„ μ‹ κ°€μ¥ μ¤‘μ”ν• κ²ƒμ€ **λ¦¬μ†μ¤λ¥Ό μ‹λ³„**ν•λ” κ²ƒμ΄λ‹¤.
    - URIλ” λ¦¬μ†μ¤λ§ μ‹λ³„ν•΄μ•Όν•λ‹¤.
        - URI κ³„μΈµ κµ¬μ΅° μ‚¬μ©
            - ex. νμ› λ©λ΅ μ΅°ν /members, νμ› μ΅°ν /members/{id}
    - λ¦¬μ†μ¤μ™€ ν•΄λ‹Ή λ¦¬μ†μ¤λ¥Ό λ€μƒμΌλ΅ ν•λ” ν–‰μ„λ¥Ό λ¶„λ¦¬ν•΄μ•Όν•λ‹¤.
        * λ¦¬μ†μ¤ = νμ›
        * ν–‰μ„ = μ΅°ν, λ“±λ΅, μ‚­μ , λ³€κ²½

    * λ¦¬μ†μ¤λ” λ…μ‚¬, ν–‰μ„λ” λ™μ‚¬
    * ν–‰μ„(λ©”μ„λ“)λ” μ–΄λ–»κ² κµ¬λ¶„?
        - HTTP λ©”μ„λ“λ¥Ό μ‚¬μ©ν•΄μ„ κµ¬λ¶„ν•λ‹¤.

## 4-2. GET, POST

### GET

- λ¦¬μ†μ¤ μ΅°ν
- μ„λ²„μ— λ°μ΄ν„°λ¥Ό μ „λ‹¬ν•  λ•λ” query(μΏΌλ¦¬ νλΌλ―Έν„°, μΏΌλ¦¬ μ¤νΈλ§)λ¥Ό ν†µν•΄μ„ μ „λ‹¬

### POST

* ν΄λΌμ΄μ–ΈνΈμ—μ„ λ©”μ„Έμ§€ λ°”λ””λ¥Ό ν†µν•΄ μ„λ²„λ΅ μ”μ²­ λ°μ΄ν„°λ¥Ό μ „λ‹¬ν•λ©΄ μ„λ²„λ” μ”μ²­ λ°μ΄ν„°λ¥Ό μ²λ¦¬ν•¨
* μ „λ‹¬λ λ°μ΄ν„°λ” μ£Όλ΅ μ‹ κ· λ¦¬μ†μ¤ λ“±λ΅, ν”„λ΅μ„Έμ¤ μ²λ¦¬μ— μ‚¬μ©
    - λ‹¨μν λ°μ΄ν„°λ¥Ό μƒμ„±, λ³€κ²½ν•λ” κ²ƒμ„ λ„μ–΄μ„ ν”„λ΅μ„Έμ¤ μ²λ¦¬μ—λ„ μ‚¬μ©λλ‹¤.
        - ex. κ²°μ  μ™„λ£ -> λ°°λ‹¬ μ‹μ‘ => λ°°λ‹¬ μ™„λ£ μ™€ κ°™μ€ **ν”„λ΅μ„Έμ¤μ μƒνƒ λ³€κ²½**
        - POST /orders/{orderId}/start-delivery μ™€ κ°™μ€ **μ»¨νΈλ΅¤ URI**λ΅λ„ μ‚¬μ©λλ‹¤.
* POSTλ” λ¨λ“  μ²λ¦¬κ°€ κ°€λ¥
    - ex. JSONμΌλ΅ μ΅°ν λ°μ΄ν„°λ¥Ό λ„κ²¨μ•Ό ν•λ”λ°, GET λ©”μ„λ“λ¥Ό μ‚¬μ©ν•κΈ° μ–΄λ ¤μΈ λ•

## 4-3. PUT, PATCH, DELETE

### PUT

* λ¦¬μ†μ¤ λ€μ²΄
    - λ¦¬μ†μ¤κ°€ μμΌλ©΄ λ€μ²΄, μ—†μΌλ©΄ μƒμ„±ν•λ‹¤. μ‰½κ² λ§ν•λ©΄ κ³ λƒ¥ λ®μ–΄λ²„λ¦¬κΈ°
    - ν΄λΌμ΄μ–ΈνΈκ°€ λ¦¬μ†μ¤μ μ„μΉλ¥Ό μ•κ³  URIλ¥Ό μ§€μ •ν•¨, POSTμ™€μ μ°¨μ΄μ 
        - ex. PUT /members/1

#### β οΈ λ¦¬μ†μ¤λ¥Ό μ™„μ „ν λ€μ²΄ν•λ” κ²ƒμ„ μ£Όμ!

- κΈ°μ΅΄ λ¦¬μ†μ¤λ¥Ό μ™„μ „ν λ€μ²΄ν•κΈ° λ•λ¬Έμ— κΈ°μ΅΄ λ¦¬μ†μ¤κ°€ μ§€μ›μ§„λ‹¤.
    - ex. { username: "name", age: 20 } <br/>
      PUT { age: 22 } <br/>
      => { age: 22 } (username μ§€μ›μ§)

### PATCH

* λ¦¬μ†μ¤ λ¶€λ¶„ λ³€κ²½
    - ex. { username: "name", age: 20 } <br/>
    PUT { age: 22 } <br/>
    => { username: "name", age: 22 } (age λ¶€λ¶„ λ³€κ²½)
* PATCHλ¥Ό μ§€μ› μ•ν•λ” μ„λ²„μ—μ„λ” POSTλ¥Ό μ‚¬μ©, POSTλ” λ¬΄μ μ„

### DELETE

* λ¦¬μ†μ¤ μ κ±°

## 4-4. HTTP λ©”μ„λ“μ μ†μ„±

### μ•μ „, Safe

* νΈμ¶ν•΄λ„ λ¦¬μ†μ¤κ°€ λ³€κ²½λμ§€ μ•λ” κ²ƒ
    - μ•μ „μ€ λ€μƒ λ¦¬μ†μ¤κ°€ λ³€ν•λ”κ°€ μ•„λ‹κ°€λ§ κ³ λ ¤ν•¨

### λ©±λ“±, Idempotent

* ν• λ² νΈμ¶ν•λ“  μ—¬λ¬λ² νΈμ¶ν•λ“  κ²°κ³Όκ°€ κ°™μ€ κ²ƒ
* λ©±λ“± λ©”μ„λ“
    - GET, PUT, DELETE
    - POSTλ” λ©±λ“±ν•μ§€ μ•λ‹¤. κ²°μ λ¥Ό λ‘λ²ν•λ©΄ μ¤‘λ³µ κ²°μ  λ°μƒ
* λ©±λ“±μ€ μ™Έλ¶€ μ”μΈμΌλ΅ μ¤‘κ°„μ— λ¦¬μ†μ¤κ°€ λ³€κ²½λλ” κ²ƒ κΉμ§€λ” κ³ λ ¤ν•μ§€ μ•λ”λ‹¤.
    - ex. μ‚¬μ©μ 1μ΄ λ°μ΄ν„°λ¥Ό μ΅°νν•  λ•(GET) μ‚¬μ©μ 2κ°€ λ°μ΄ν„°λ¥Ό μμ •(PUT)ν•΄μ„ μ‚¬μ©μ 1μ΄ κ°™μ€ μ”μ²­μ„ νΈμ¶ν–μ„ λ• μ‚¬μ©μ 1μ—κ² μ‚¬μ©μ2μ μν–¥μΌλ΅ λ°”λ€ λ°μ΄ν„°κ°€ λ³΄μ—¬μ§€λ” μƒν™©

### μΊμ‹ κ°€λ¥, Cacheable

* μ‘λ‹µ κ²°κ³Ό λ¦¬μ†μ¤λ¥Ό μΊμ‹ν•΄μ„ μ‚¬μ©
    - μ£Όλ΅ GET, HEAD μ •λ„λ§ μΊμ‹λ΅ μ‚¬μ©ν•¨
    - POST, PATCHλ” λ³Έλ¬Έ λ‚΄μ©κΉμ§€ μΊμ‹ ν‚¤λ΅ κ³ λ ¤ν•΄μ•Ό ν•λ”λ°, κµ¬ν„μ΄ μ‰½μ§€ μ•μ

## 4-5. HTTP λ©”μ„λ“ ν™μ©

### ν΄λΌμ΄μ–ΈνΈμ—μ„ μ„λ²„λ΅ λ°μ΄ν„° μ „μ†΅

* μΏΌλ¦¬ νλΌλ―Έν„°λ¥Ό ν†µν• μ „μ†΅ (GET)
    - μ£Όλ΅ μ •λ ¬ ν•„ν„°(κ²€μƒ‰μ–΄)
* λ©”μ„Έμ§€ λ°”λ””λ¥Ό ν†µν• μ „μ†΅ (POST, PUT, PATCH)
    - νμ› κ°€μ…, μƒν’ μ£Όλ¬Έ, λ¦¬μ†μ¤ λ“±λ΅, λ³€κ²½

#### βƒοΈ 4κ°€μ§€ μƒν™©

* μ •μ  λ°μ΄ν„° μ΅°ν
    - μ΄λ―Έμ§€, μ •μ  ν…μ¤νΈ λ¬Έμ„
* λ™μ  λ°μ΄ν„° μ΅°ν
    - μ£Όλ΅ κ²€μƒ‰, λ©λ΅ μ •λ ¬ ν•„ν„°
* HTML Form λ°μ΄ν„° μ „μ†΅
    - POST μ „μ†΅ - μ €μ¥
        - Content-Typeμ€ **application/x-www-form-urlencoded**λ΅ μΏΌλ¦¬ νλΌλ―Έν„°μ™€ κ±°μ λ™μΌν• ν•μ‹μΌλ΅ μ„λ²„μ— μ „μ†΅ν•¨
    - GET μ „μ†΅ - μ €μ¥
        - GETμ€ URL κ²½λ΅μ— μΏΌλ¦¬ νλΌλ―Έν„°λ΅ μ„λ²„μ— μ „μ†΅ν•¨
        - λ°μ΄ν„° μ €μ¥ μ‹μ—” GET λ©”μ„λ“ μ‚¬μ© π™…β€οΈ
    - enctype=multipart/form-data
        - μ£Όλ΅ νμΌ μ—…λ΅λ“ κ°™μ€ λ°”μ΄λ„λ¦¬ λ°μ΄ν„°λ¥Ό μ „μ†΅ν•  λ• μ‚¬μ©ν•¨
        - λ‹¤λ¥Έ μΆ…λ¥μ μ—¬λ¬ νμΌκ³Ό νΌ λ‚΄μ© ν•¨κ» μ „μ†΅ κ°€λ¥(= multipart)
* HTTP API λ°μ΄ν„° μ „μ†΅
    - μ„λ²„ to μ„λ²„, λ°±μ—”λ“ μ‹μ¤ν… ν†µμ‹ 
    - μ•± ν΄λΌμ΄μ–ΈνΈ(μ•„μ΄ν°, μ•λ“λ΅μ΄λ“)μ—μ„λ„ μ‚¬μ©λ¨
    - μ›Ή ν΄λΌμ΄μ–ΈνΈ
        - HTMLμ—μ„ form μ „μ†΅ λ€μ‹  JSλ¥Ό ν†µν• ν†µμ‹ μ— μ‚¬μ©(AJAX)
        - λ¦¬μ•΅νΈ λ·°μ™€ κ°™μ€ μ›Ή ν΄λΌμ΄μ–ΈνΈμ™€ API ν†µμ‹ 
    - Content-Type: application/jsonμ„ μ£Όλ΅ μ‚¬μ©

### HTTP API μ„¤κ³„ μμ‹

* POST, PUT κΈ°λ°μ λ“±λ΅ κµ¬λ¶„
* HTML FORM ν™μ©, GETκ³Ό POSTλ§ κ°€λ¥

#### β… API μ„¤κ³„ - POST κΈ°λ° λ“±λ΅

ex. λ©¤λ²„ κ΄€λ¦¬ μ‹μ¤ν…

![POST λ¦¬μ†μ¤ λ“±λ΅ μ‘λ‹µ λ°μ΄ν„°](./images/4-1.png)

* ν΄λΌμ΄μ–ΈνΈλ” λ‘¥λ΅λ  λ¦¬μ†μ¤μ URIλ¥Ό λ¨λ¥Έλ‹¤.
    - POST /members
* μ„λ²„κ°€ μƒλ΅ λ“±λ΅λ λ¦¬μ†μ¤ URIλ¥Ό μƒμ„±ν•λ‹¤.
    - HTTP/1.1 201 Created <br/>
      Location: /members/100
* => **μ»¬λ ‰μ…(Collection)**
    - μ„λ²„κ°€ κ΄€λ¦¬ν•λ” λ¦¬μ†μ¤ λ””λ ‰ν† λ¦¬

#### β… API μ„¤κ³„ - PUT κΈ°λ° λ“±λ΅

ex. νμΌ κ΄€λ¦¬ μ‹μ¤ν…

* ν΄λΌμ΄μ–ΈνΈκ°€ λ¦¬μ†μ¤ URIλ¥Ό μ•κ³  μμ–΄μ•Ό ν•λ‹¤.
    - νμΌ λ“±λ΅, PUT /files/star.jpg
* ν΄λΌμ΄μ–ΈνΈκ°€ μ§μ ‘ λ¦¬μ†μ¤μ URIλ¥Ό μ§€μ •ν•λ‹¤.
* => **μ¤ν† μ–΄(Store)**
    - ν΄λΌμ΄μ–ΈνΈκ°€ κ΄€λ¦¬ν•λ” μμ› μ €μ¥μ†

#### β… HTML FORM μ‚¬μ©

* **μ»¨νΈλ΅¤ URI(λ™μ‚¬λ΅ λ λ¦¬μ†μ¤ κ²½λ΅)**
    - GET, POSTλ§ μ§€μ›ν•λ―€λ΅ μ μ•½μ΄ μλ‹¤.
    - μ΄λ° μ μ•½μ„ ν•΄κ²°ν•κΈ° μ„ν•΄ μ»¨νΈλ΅¤ URIλ¥Ό μ‚¬μ©ν•λ‹¤.
    - HTTP λ©”μ„λ“λ΅ ν•΄κ²°ν•κΈ° μ• λ§¤ν• κ²½μ°λ§ μ‚¬μ©ν•λ‹¤.
        - μ»¨νΈλ΅¤ URI ex. POST /new, /edit, /delete

