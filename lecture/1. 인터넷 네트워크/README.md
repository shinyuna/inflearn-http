# 인터넷 네트워크

- 인터넷 통신
- IP
- TCP, UDP
- PORT
- DNS

* * *

## 1-1. 인터넷에서 컴퓨터끼리 어떻게 통신할까?

두 대의 컴퓨터(클라이언트와 서버)가 직접 데이터를 주고 받는 것이 아닌 그 사이에 있는 인터넷망을 통해 데이터를 주고 받는다. 이 때 공통된 규약(프로토콜)을 사용하는데 이때 사용되는 것이 **IP**다.

![두 대의 컴퓨터가 인터넷에서 통신하는 사진](./images/1-1.png)

## 1-2. IP (인터넷 프로토콜)

> IP 프로콜에서 각 장치를 나타내는 IP 주소를 가리키는 말로 쓰인다. 쉽게 보면 각 장치들의 주민등록번호이다.

- 지정한 IP 주소에서 메세지(데이터)를 전달할 수 있도록 정한 규칙
- **IP 패킷**이라는 통신 단위로 데이터를 전달
    - 패킷 정보: 전송 데이터, 출발지 IP, 목적지 IP

### IP 프로토콜의 한계

- 비연결성
    - 패킷을 받을 대상이 없거나(=패킷을 받는 대상의 PC 전원이 꺼져있는 상태) 서비스 불능 상태여도 패킷을 전송한다.
- 비신뢰성
    - 패킷 소실
        - 중간에 전송 받는 패킷(서버)이 소실되도 알 수 없다.
    - 패킷 전달 순서가 변결 될 수 있다.
      - 1500 바이트가 넘으면 패킷 단위를 쪼개서 보내는데, 이때 나뉜 패킷들이 모두 동일한 Node(경로)로 가지 않아 순서가 바뀔 수 있다. 
- 프로그램 구분
    - 같은 IP로 여러개의 서비스를 사용하고 있을 때 어떤 애플리케이션인지 구분을 하는데 한계가 있다.

위와 같은 IP의 한계를 보완해주는 것이 **TCP 프로토콜**다.

## 1-3. TCP/UDP

### 인터넷 프로토콜 스택의 4계층

![인터넷 프로토콜 스택의 4계층](./images/1-3-1.png)

- IP 위에 TCP를 더해 IP의 한계를 보완해준다.
- 메세지 데이터 -> TCP 정보 생성 + 메세지 데이터 ->  IP 패킷을 생성하고 전달

패킷: 패키지 + 덩어리의 합성어

### TCP 특징

- 전송 제어 프로토콜(Transmission control protocol)
    - 연결 지향 (TCP 3 way handshake: 가상 연결)
        - 연결 지향적
    - 데티터 전달 보증
        - 패킷이 누락된 것을 확인할 수 있다.
    - 순서 보장

#### TCP 3 way handshake

- SYN(연결 과정, 접속 요청) -> SYN + ACK(요청 수락) -> ACK
- 서로 연결이 된 것이 확인되야지만 요청을 보낼 수 있다.
- 요즘은 3번 ACK를 전송할 때 데이터도 함께 보낸다.

#### 데이터 전달 & 순서 보장

- 데이터를 전송하면 서버에서 잘 받았다는 메세지를 보내준다.
- 중간에 순서가 잘못되면 잘못된 순서부터 다시보낸다.

![TCP/IP 패킷](./images/1-3-2.png)
이 모든 것이 다 가능한 이유는 TCP 정보에 검증 정보들이 추가되어 있기 때문이다. TCP는 신뢰할 수 있는 프로토콜이다.

### UDP 특징

- 사용자 데이터그램 프로토콜(User Datagram protocol)
    - 하얀 도화지와 같다. 기능이 거의 없다.
    - IP와 같지만 IP엔 없는 PORT가 있음
        - 하나의 IP에 여러 패킷이 올 때 어떤 애플리케이션인지 구분할 수 있음
        - 체크섬(=메세지 검증) 가능
    - UDP는 아무런 기능이 없어서 직접 기능을 확장해서 사용할 수 있다.

## 1-4. PORT(항구)

- 통신할 애플리케이션을 구분하기 위한 것

IP만으로는 한 대의 클라이언트에서 여러대의 서버에서 전송한 패킷을 받았을 때 어느 서버에서 온 패킷인지 구분하기 어렵다.

![같은 IP 내에서 프로세스 구분](./images/1-3-2.png)

- TCP/IP 패킷엔 출발지와 도착지의 PORT가 있다. 그렇기 때문에 클라이언트가 어떤 서버에 어떤 포트로 연결해야하는지 알 수 있다.
    - 웹 브라우저 응답, 웹 브라우저 서버에서 출발지 IP(=아파트)의 PORT(=동, 호수)에 HTML 문서를 전송해준다.

## 1-5. DNS(Domain Name System)

IP 주소는 기억하기 어렵다. 변경되기도 한다.

- DNS는 IP의 전화번호부다. 도메인 명을 등록하면 그것을 IP 주소로 변경한다.
    - ex) 도메인명: google.com -> IP: 200.200.200.2